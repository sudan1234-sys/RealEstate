<div class="min-h-screen bg-gradient-to-b from-gray-100 to-gray-50">
  <!-- Navigation Bar -->
  <div class="bg-white shadow-md py-4">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 flex justify-between items-center">
      <button (click)="goToHome()" class="text-xl font-bold text-blue-600 hover:text-blue-800 transition-colors">
        üè† Home
      </button>
      <button (click)="gotosavedproperties()" class="text-lg text-gray-700 hover:text-blue-600 transition-colors relative">
        üíæ Saved Properties
        <span *ngIf="addtofavourateService.savedProperties.length > 0" class="absolute -top-2 -right-4 bg-red-500 text-white rounded-full px-2 text-xs">
          {{addtofavourateService.savedProperties.length}}
        </span>
      </button>
    </div>
  </div>

  <!-- Filter Header -->
  <div class="bg-white shadow-sm">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
      <div class="grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4">

        <div class="relative">
          <select [(ngModel)]="selectedType" (change)="applyFilters()" 
            class="w-full px-4 py-3 border-none rounded-lg bg-blue-100 text-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500">
            <option value="">All Property Types</option>
            <option *ngFor="let type of propertyTypes" [value]="type">{{type}}</option>
          </select>
        </div>

        <div class="relative">
          <select [(ngModel)]="selectedPrice" (change)="applyFilters()"
            class="w-full px-4 py-3 border-none rounded-lg bg-green-100 text-green-700 focus:outline-none focus:ring-2 focus:ring-green-500">
            <option value="">Price Range</option>
            <option *ngFor="let price of priceRanges" [value]="price.value">{{price.label}}</option>
          </select>
        </div>

        <div class="relative">
          <select [(ngModel)]="selectedBedrooms" (change)="applyFilters()"
            class="w-full px-4 py-3 border-none rounded-lg bg-yellow-100 text-yellow-700 focus:outline-none focus:ring-2 focus:ring-yellow-500">
            <option value="">Bedrooms</option>
            <option *ngFor="let bed of bedroomOptions" [value]="bed">{{bed}}+</option>
          </select>
        </div>

        <div class="relative">
          <select [(ngModel)]="selectedBathrooms" (change)="applyFilters()"
            class="w-full px-4 py-3 border-none rounded-lg bg-pink-100 text-pink-700 focus:outline-none focus:ring-2 focus:ring-pink-500">
            <option value="">Bathrooms</option>
            <option *ngFor="let bath of bathroomOptions" [value]="bath">{{bath}}+</option>
          </select>
        </div>

      </div>
    </div>
  </div>

  @if(property.length==0){
  <div style="display: flex;justify-content:center ;height: 450px; margin-top: 150px; mix-blend-mode: multiply;">
    <img style="height: 70%; object-fit:contain;" src="../../assets/images/npf.png ">  
  </div>
  }

  @else {

  @for(house of property; track house.id){
  <div (click)="gotopropertydetails(house)" 
       class="max-w-4xl mx-auto bg-white rounded-lg shadow-lg overflow-hidden border border-gray-200 mt-10 relative">

    <!-- Heart -->
    <button (click)="toggleSave(house); $event.stopPropagation()" 
      class="absolute top-2 right-2 z-10 p-2 hover:bg-gray-100 rounded-full transition-colors">
      <svg xmlns="http://www.w3.org/2000/svg" 
        [ngClass]="house.saved ? 'fill-red-500 stroke-red-500' : 'fill-none stroke-gray-400'" 
        class="w-6 h-6" viewBox="0 0 24 24" stroke-width="2">
        <path stroke-linecap="round" stroke-linejoin="round" 
          d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" />
      </svg>
    </button>

    <!-- üî¥ RESPONSIVE GRID FIX -->
    <div class="grid grid-cols-1 md:grid-cols-3">

      <!-- IMAGE -->
      <div class="relative col-span-1 md:col-span-1 h-56 md:h-full">
        <img
          [src]="house.photos[0]"
          class="w-full h-full object-cover"
        />
        <div class="absolute bottom-2 left-2 bg-gray-800 text-white text-xs px-2 py-1 rounded">
          {{ house.listingDate }}
        </div>
      </div>

      <!-- DETAILS -->
      <div class="col-span-1 md:col-span-2 p-5">

        <h2 class="text-xl font-semibold">{{ house.street }}, {{ house.city }}</h2>

        <p class="text-lg font-bold mt-2">
          ‚Çπ{{ house.price }}
          <span class="text-gray-500 text-sm">({{ house.landSize }})</span>
        </p>

        <div class="flex items-center justify-between mt-3">
          <span class="text-gray-600 text-sm">{{ house.squareFootage }} sq.ft</span>
          <span class="text-gray-900 font-semibold">South east Facing</span>
        </div>

        <p class="text-gray-500 text-sm mt-2">{{ house.description }}</p>

        <p class="mt-3 text-sm text-gray-700">
          <span class="font-semibold">Highlights:</span>
          @for(features of house.features; track $index){
            {{ features }}
          }
        </p>

        <div class="mt-5 flex items-center justify-between border-t pt-4">
          <div class="flex items-center">
            <div class="bg-yellow-200 p-2 rounded-full">
              <span class="text-xs font-bold text-yellow-700">CAPS</span>
            </div>
            <div class="ml-3">
              <p class="font-medium">{{house.seller.name}}</p>
              <p class="text-xs text-orange-500">Housing Expert PRO</p>
              <p class="text-xs text-gray-500">100+ buyers contacted</p>
            </div>
          </div>
          <button class="bg-purple-600 text-white px-4 py-2 rounded hover:bg-purple-700">
            Contact
          </button>
        </div>

      </div>
    </div>
  </div>
  }

  }

</div>
